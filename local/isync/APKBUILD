# Contributor: Stuart Cardall <developer@it-offshore.co.uk>
# Maintainer: Stuart Cardall <developer@it-offshore.co.uk>
pkgname=isync
pkgver=1.3.0
pkgrel=5
pkgdesc="IMAP and MailDir mailbox synchronizer"
url="http://isync.sourceforge.net"
arch="all"
license="GPL-2.0"
depends=""
makedepends="$depends_dev openssl-dev cyrus-sasl-dev zlib-dev db-dev perl-dev"
subpackages="$pkgname-doc"
source="$pkgname-$pkgver.tar.gz::http://downloads.sourceforge.net/sourceforge/isync/$pkgname-$pkgver.tar.gz
	character-limit.patch
	silence-sasl-wants-more-steps-warning.patch
	"
builddir="$srcdir"/$pkgname-$pkgver

build() {
	cd "$builddir"
	./configure \
		--build="$CBUILD" \
		--host="$CHOST" \
		--prefix=/usr \
		--sysconfdir=/etc \
		--mandir=/usr/share/man
	make
}

check() {
	cd "$builddir"
	make check
}

package() {
	cd "$builddir"
	make DESTDIR="$pkgdir" install
}

sha512sums="b5186f2afe97cab58ce55d3ec19ae7371676ae614448614a9e3e02d09662c34b74e559f0926661fa0300ab22dab9e2e9089b78ee38b94141ff3f8b4d75578ffa  isync-1.3.0.tar.gz
8a8425ae5a4a1f0ca33ead27059acd1f546da0201a3b2b902b442f1165b4f06aa95a4c6506f2eb79e46f4f316db71b47ee49d1f86f5c52d13f6766ae1d1cd829  character-limit.patch
68578ee8bea8b8b13dbf074bce878365643c1ddc3f017fbffc9b35e0c6f56348664780694a75c07efe5dd7c843f1be73799dff78f205fd83f5ef8e00c4273c0b  silence-sasl-wants-more-steps-warning.patch"
